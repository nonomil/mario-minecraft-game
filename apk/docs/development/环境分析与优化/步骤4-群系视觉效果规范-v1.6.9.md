# ç¾¤ç³»è§†è§‰æ•ˆæœè§„èŒƒ

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.6.9
**åˆ›å»ºæ—¥æœŸ**ï¼š2026-02-15
**versionCode**ï¼š62
**æ–‡æ¡£ç±»å‹**ï¼šè®¾è®¡æ–‡æ¡£ - è§†è§‰è§„èŒƒ

---

## ä¸€ã€æ–‡æ¡£ç›®æ ‡

ä¸ºæ¯ä¸ªç¾¤ç³»çš„æ ¸å¿ƒç‰¹æ•ˆåˆ¶å®šé‡åŒ–æ ‡å‡†ï¼Œç¡®ä¿å¼€å‘è½åœ°æ—¶é£æ ¼ç»Ÿä¸€ã€æ€§èƒ½å¯æ§ã€è§†è§‰æ•ˆæœä¸€è‡´ã€‚

---

## äºŒã€ç²’å­æ•ˆæœé‡åŒ–è§„èŒƒ

### 2.1 ç²’å­æ•ˆæœæ ‡å‡†è¡¨

| ç¾¤ç³» | ç²’å­ç±»å‹ | ç”Ÿæˆé¢‘ç‡ | é€Ÿåº¦ | å¤§å° | é¢œè‰² | é€æ˜åº¦ | ç”Ÿå‘½å‘¨æœŸ | èŒƒå›´ |
|------|---------|---------|------|------|------|--------|---------|------|
| ğŸŒ² æ£®æ— | æ ‘å¶ | 10-15ç‰‡/ç§’ | 0.8x | 4-6px | #228B22 | 0.6-1.0 | 3ç§’ | 5x5m |
| ğŸŒ¸ æ¨±èŠ± | èŠ±ç“£ | 10-15ç‰‡/ç§’ | 0.8x | 4-7px | #FFB7C5 | 0.6-1.0 | 4ç§’ | 5x5m |
| â„ï¸ é›ªåœ° | é›ªèŠ± | 20ç‰‡/ç§’ | 0.5x | 2-5px | #FFFFFF | 0.7-1.0 | 5ç§’ | å…¨å± |
| ğŸœï¸ æ²™æ¼  | æ²™å°˜ | 8-12ä¸ª/ç§’ | 1.2xæ¨ªå‘ | 3-4px | #D2B48C | 0.3-0.6 | 2ç§’ | å…¨å± |
| ğŸ„ è˜‘è‡å²› | å­¢å­ | 5-8ä¸ª/ç§’ | 0.6xä¸Šå‡ | 3-5px | #BA55D3 | 0.4-0.8 | 4ç§’ | 3x3m |
| â›°ï¸ å±±åœ° | é—ªå…‰ | 3-5ä¸ª/ç§’ | é™æ­¢ | 2-3px | #FFFFFF | 0.5-1.0é—ªçƒ | 2ç§’ | å…¨å± |
| ğŸŒŠ æµ·æ´‹ | æ°”æ³¡ | 5-8ä¸ª/ç§’ | 1.0xä¸Šå‡ | 3-6px | #87CEEB | 0.6-0.9 | 3ç§’ | æ°´ä¸‹åŒºåŸŸ |
| ğŸŒ‹ ç«å±± | ç«å±±ç° | 15-20ä¸ª/ç§’ | 0.6xä¸Šå‡ | 3-4px | #696969 | 0.4-0.8 | 3ç§’ | å…¨å± |
| ğŸ”¥ åœ°ç‹± | ä½™çƒ¬ | 12-18ä¸ª/ç§’ | 0.8xä¸Šå‡ | 2-4px | #FF4500 | 0.5-0.9 | 2.5ç§’ | å…¨å± |
| ğŸŒ™ æ·±æš— | è„‰å†²æ³¢ | 1æ¬¡/3ç§’ | æ‰©æ•£ | åŠå¾„3m | #008080â†’#00FFFF | 0.8â†’0 | 1ç§’ | å±€éƒ¨ |
| ğŸŸ£ æœ«åœ° | æœ«åœ°ç²’å­ | 8-12ä¸ª/ç§’ | 0.4xæ¼‚æµ® | 3-5px | #8B00FF | 0.5-0.9 | 4ç§’ | å…¨å± |
| â˜ï¸ å¤©ç©º | é‡‘è‰²å…‰ç‚¹ | éšæœºç”Ÿæˆ | 1.2xæ¼‚æµ® | 4-6px | #FFD700 | 0.7-1.0 | 5ç§’ | å…¨å± |

### 2.2 ç²’å­ä»£ç æ¨¡æ¿

```javascript
class BiomeParticle {
  constructor(biomeConfig) {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.vx = biomeConfig.velocity.x;
    this.vy = biomeConfig.velocity.y;
    this.size = biomeConfig.size.min + Math.random() * (biomeConfig.size.max - biomeConfig.size.min);
    this.color = biomeConfig.color;
    this.alpha = biomeConfig.alpha.min;
    this.life = biomeConfig.lifespan;
    this.maxLife = biomeConfig.lifespan;
  }

  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.life--;
    this.alpha = (this.life / this.maxLife) * 0.8 + 0.2;
  }

  render(ctx) {
    ctx.fillStyle = this.color;
    ctx.globalAlpha = this.alpha;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
    ctx.globalAlpha = 1;
  }
}

// æ¨±èŠ±èŠ±ç“£é…ç½®ç¤ºä¾‹
const CHERRY_PARTICLE_CONFIG = {
  spawnRate: 12, // æ¯ç§’12ç‰‡
  velocity: { x: () => (Math.random() - 0.5) * 0.5, y: 0.8 },
  size: { min: 4, max: 7 },
  color: '#FFB7C5',
  alpha: { min: 0.6, max: 1.0 },
  lifespan: 240 // 4ç§’ @ 60fps
};
```

---

## ä¸‰ã€å¤©ç©ºæ¸²æŸ“è§„èŒƒ

### 3.1 å¤©ç©ºé¢œè‰²æ¸å˜è¡¨

| ç¾¤ç³» | æ¸å˜ç±»å‹ | é¢œè‰²1 | é¢œè‰²2 | é¢œè‰²3 | CSSä»£ç  |
|------|---------|-------|-------|-------|---------|
| ğŸŒ² æ£®æ— | å•è‰² | #88CC88 | - | - | `#88CC88` |
| ğŸŒ¸ æ¨±èŠ± | å‚ç›´æ¸å˜ | #FFE4E1 | #FFC0CB | - | `linear-gradient(to bottom, #FFE4E1, #FFC0CB)` |
| â„ï¸ é›ªåœ° | å•è‰² | #CCE6FF | - | - | `#CCE6FF` |
| ğŸœï¸ æ²™æ¼  | å•è‰² | #FFEECC | - | - | `#FFEECC` |
| ğŸ„ è˜‘è‡å²› | å‚ç›´æ¸å˜ | #DDA0DD | #BA55D3 | - | `linear-gradient(to bottom, #DDA0DD, #BA55D3)` |
| â›°ï¸ å±±åœ° | å•è‰² | #666688 | - | - | `#666688` |
| ğŸŒŠ æµ·æ´‹ | ä¸‰è‰²æ¸å˜ | #AAD4F5 | #4682B4 | #191970 | `linear-gradient(to bottom, #AAD4F5, #4682B4, #191970)` |
| ğŸŒ‹ ç«å±± | ä¸‰è‰²æ¸å˜ | #FF4500 | #8B0000 | #2F1F1F | `linear-gradient(to bottom, #FF4500, #8B0000, #2F1F1F)` |
| ğŸ”¥ åœ°ç‹± | å•è‰² | #CC3333 | - | - | `#CC3333` |
| ğŸŒ™ æ·±æš— | ä¸‰è‰²æ¸å˜ | #0A0A1A | #0D1B2A | #1B3A4B | `linear-gradient(to bottom, #0A0A1A, #0D1B2A, #1B3A4B)` |
| ğŸŸ£ æœ«åœ° | ä¸‰è‰²æ¸å˜ | #0D0015 | #1A0A2E | #2D1B4E | `linear-gradient(to bottom, #0D0015, #1A0A2E, #2D1B4E)` |
| â˜ï¸ å¤©ç©º | ä¸‰è‰²æ¸å˜ | #87CEEB | #FFD700 | #FF6347 | `linear-gradient(to bottom, #87CEEB, #FFD700, #FF6347)` |

### 3.2 å¤©ç©ºæ¸²æŸ“ä»£ç 

```javascript
function renderBiomeSky(biome) {
  const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);

  if (biome.skyColors.length === 1) {
    // å•è‰²å¤©ç©º
    ctx.fillStyle = biome.skyColors[0];
  } else if (biome.skyColors.length === 2) {
    // åŒè‰²æ¸å˜
    gradient.addColorStop(0, biome.skyColors[0]);
    gradient.addColorStop(1, biome.skyColors[1]);
    ctx.fillStyle = gradient;
  } else if (biome.skyColors.length === 3) {
    // ä¸‰è‰²æ¸å˜
    gradient.addColorStop(0, biome.skyColors[0]);
    gradient.addColorStop(0.5, biome.skyColors[1]);
    gradient.addColorStop(1, biome.skyColors[2]);
    ctx.fillStyle = gradient;
  }

  ctx.fillRect(0, 0, canvas.width, canvas.height);
}
```

---

## å››ã€ç‰¹æ®Šè§†è§‰æ•ˆæœè§„èŒƒ

### 4.1 æ·±æš—ä¹‹åŸŸå¹½åŒ¿è„‰å†²æ³¢

**æ•ˆæœæè¿°**ï¼šæ¯3ç§’ä»å¹½åŒ¿å—å‘å‡ºä¸€æ¬¡è“ç»¿è‰²è„‰å†²æ³¢ï¼ŒåŠå¾„3mï¼ŒæŒç»­1ç§’

**å‚æ•°é…ç½®**ï¼š
```javascript
const SCULK_PULSE_CONFIG = {
  interval: 3000, // 3ç§’
  radius: 150, // 3m = 150px
  duration: 1000, // 1ç§’
  colorStart: '#008080',
  colorEnd: '#00FFFF',
  alphaStart: 0.8,
  alphaEnd: 0
};
```

**æ¸²æŸ“ä»£ç **ï¼š
```javascript
class SculkPulse {
  constructor(x, y) {
    this.x = x;
    this.y = y;
    this.radius = 0;
    this.maxRadius = 150;
    this.life = 60; // 1ç§’ @ 60fps
    this.maxLife = 60;
  }

  update() {
    this.radius = (1 - this.life / this.maxLife) * this.maxRadius;
    this.life--;
  }

  render(ctx) {
    const progress = 1 - this.life / this.maxLife;
    const alpha = (this.life / this.maxLife) * 0.8;

    // é¢œè‰²æ¸å˜
    const r = Math.floor(0 + progress * (0 - 0));
    const g = Math.floor(128 + progress * (255 - 128));
    const b = Math.floor(128 + progress * (255 - 128));

    ctx.strokeStyle = `rgba(${r}, ${g}, ${b}, ${alpha})`;
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
    ctx.stroke();
  }
}
```

### 4.2 ç«å±±çƒ­æµªæ‰­æ›²æ•ˆæœ

**æ•ˆæœæè¿°**ï¼šå±å¹•ä¸­ä¸‹éƒ¨å‡ºç°æ³¢æµªå½¢æ‰­æ›²çº¿æ¡ï¼Œæ¨¡æ‹Ÿçƒ­æµª

**å‚æ•°é…ç½®**ï¼š
```javascript
const HEAT_WAVE_CONFIG = {
  waveCount: 5,
  amplitude: 10,
  frequency: 0.02,
  speed: 0.05,
  yStart: canvas.height * 0.6,
  color: 'rgba(255, 69, 0, 0.3)'
};
```

**æ¸²æŸ“ä»£ç **ï¼š
```javascript
function renderHeatWave() {
  const time = Date.now() * HEAT_WAVE_CONFIG.speed;
  ctx.strokeStyle = HEAT_WAVE_CONFIG.color;
  ctx.lineWidth = 2;

  for (let i = 0; i < HEAT_WAVE_CONFIG.waveCount; i++) {
    ctx.beginPath();
    const yOffset = i * 20;

    for (let x = 0; x < canvas.width; x += 5) {
      const y = HEAT_WAVE_CONFIG.yStart + yOffset +
                Math.sin(x * HEAT_WAVE_CONFIG.frequency + time + i) *
                HEAT_WAVE_CONFIG.amplitude;
      if (x === 0) ctx.moveTo(x, y);
      else ctx.lineTo(x, y);
    }
    ctx.stroke();
  }
}
```

### 4.3 æµ·æ´‹å…‰æŸæ•ˆæœ

**æ•ˆæœæè¿°**ï¼š3æ¡å‚ç›´å…‰æŸ±ä»æ°´é¢å‘ä¸‹å»¶ä¼¸ï¼Œç¼“æ…¢å·¦å³ç§»åŠ¨

**å‚æ•°é…ç½®**ï¼š
```javascript
const LIGHT_BEAM_CONFIG = {
  count: 3,
  width: 80,
  color: 'rgba(173, 216, 230, 0.3)',
  speed: 0.5,
  spacing: canvas.width / 4
};
```

**æ¸²æŸ“ä»£ç **ï¼š
```javascript
function renderLightBeams() {
  const time = Date.now() * 0.001;

  for (let i = 0; i < LIGHT_BEAM_CONFIG.count; i++) {
    const x = LIGHT_BEAM_CONFIG.spacing * (i + 1) +
              Math.sin(time + i * 2) * 50;

    const gradient = ctx.createLinearGradient(
      x - LIGHT_BEAM_CONFIG.width / 2, 0,
      x + LIGHT_BEAM_CONFIG.width / 2, 0
    );
    gradient.addColorStop(0, 'rgba(173, 216, 230, 0)');
    gradient.addColorStop(0.5, LIGHT_BEAM_CONFIG.color);
    gradient.addColorStop(1, 'rgba(173, 216, 230, 0)');

    ctx.fillStyle = gradient;
    ctx.fillRect(
      x - LIGHT_BEAM_CONFIG.width / 2,
      0,
      LIGHT_BEAM_CONFIG.width,
      canvas.height
    );
  }
}
```

### 4.4 æœ«åœ°æ˜Ÿç©ºæ•ˆæœ

**æ•ˆæœæè¿°**ï¼š30é¢—ç´«ç™½è‰²æ˜Ÿæ˜Ÿéšæœºåˆ†å¸ƒï¼Œé—ªçƒåŠ¨ç”»

**å‚æ•°é…ç½®**ï¼š
```javascript
const END_STARS_CONFIG = {
  count: 30,
  colors: ['#FFFFFF', '#E6E6FA', '#DDA0DD'],
  sizeRange: [2, 4],
  twinkleSpeed: 0.05
};
```

**æ¸²æŸ“ä»£ç **ï¼š
```javascript
class EndStar {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.size = END_STARS_CONFIG.sizeRange[0] +
                Math.random() * (END_STARS_CONFIG.sizeRange[1] - END_STARS_CONFIG.sizeRange[0]);
    this.color = END_STARS_CONFIG.colors[Math.floor(Math.random() * END_STARS_CONFIG.colors.length)];
    this.twinkleOffset = Math.random() * Math.PI * 2;
  }

  render(ctx) {
    const alpha = 0.5 + Math.sin(Date.now() * END_STARS_CONFIG.twinkleSpeed + this.twinkleOffset) * 0.5;
    ctx.fillStyle = this.color;
    ctx.globalAlpha = alpha;
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fill();
    ctx.globalAlpha = 1;
  }
}
```

---

## äº”ã€é«˜éš¾åº¦ç¾¤ç³»ç¼“è§£ç‚¹è®¾è®¡

### 5.1 åœ°ç‹±çµé­‚ç«ç›†

**åŠŸèƒ½**ï¼šç«™åœ¨å‘¨å›´å…ç–«æŒç»­çƒ­ä¼¤å®³

**å‚æ•°é…ç½®**ï¼š
```javascript
const SOUL_FIRE_BASIN = {
  radius: 80, // æœ‰æ•ˆèŒƒå›´
  cooldown: 30000, // 30ç§’å†·å´
  visual: {
    fireColor: '#4169E1', // è“è‰²ç«ç„°
    particleCount: 10
  }
};
```

**è§†è§‰è®¾è®¡**ï¼š
- è“è‰²ç«ç„°ç›†ï¼ˆ50x30pxï¼‰
- è“è‰²ç«ç„°ç²’å­å‘ä¸Šé£˜åŠ¨
- æœ‰æ•ˆèŒƒå›´æ˜¾ç¤ºæ·¡è“è‰²å…‰åœˆ

### 5.2 ç«å±±å²©æ´é¿éš¾æ‰€

**åŠŸèƒ½**ï¼šé™¨çŸ³æ‰è½å‰3ç§’é¢„è­¦ï¼Œå¯èº²å…¥æ´ç©´

**å‚æ•°é…ç½®**ï¼š
```javascript
const VOLCANO_CAVE = {
  warningTime: 3000, // 3ç§’é¢„è­¦
  warningEffects: {
    skyColor: '#FF0000',
    screenShake: true,
    shakeIntensity: 5
  },
  caveProtection: true
};
```

**è§†è§‰è®¾è®¡**ï¼š
- é™¨çŸ³æ‰è½å‰å¤©ç©ºå˜çº¢
- å±å¹•éœ‡åŠ¨ï¼ˆå¼ºåº¦5pxï¼‰
- æ´ç©´å…¥å£æ˜¾ç¤ºç»¿è‰²å®‰å…¨æ ‡è¯†

### 5.3 æ·±æš—ä¹‹åŸŸçµé­‚ç¯é™éŸ³åŒº

**åŠŸèƒ½**ï¼šæ½œè¡ŒçŠ¶æ€ä¸‹å±è”½å™ªéŸ³

**å‚æ•°é…ç½®**ï¼š
```javascript
const SOUL_LANTERN = {
  radius: 100, // æœ‰æ•ˆèŒƒå›´
  effects: {
    lighting: true,
    noiseCancellation: true // ä»…æ½œè¡Œæ—¶ç”Ÿæ•ˆ
  },
  visual: {
    lightColor: '#00CED1',
    glowRadius: 120
  }
};
```

**è§†è§‰è®¾è®¡**ï¼š
- é’è‰²ç¯ç¬¼ï¼ˆ30x40pxï¼‰
- é’è‰²å…‰æ™•ï¼ˆåŠå¾„120pxï¼‰
- æœ‰æ•ˆèŒƒå›´å†…åœ°é¢æ˜¾ç¤ºæ·¡é’è‰²å…‰åœˆ

---

## å…­ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 6.1 ç²’å­æ± ç®¡ç†

```javascript
const PARTICLE_POOL_CONFIG = {
  maxParticles: 200,
  recycleThreshold: 0.9 // 90%æ—¶å¼€å§‹å›æ”¶
};

class ParticlePool {
  constructor() {
    this.particles = [];
  }

  add(particle) {
    if (this.particles.length >= PARTICLE_POOL_CONFIG.maxParticles) {
      this.particles.shift(); // ç§»é™¤æœ€è€çš„ç²’å­
    }
    this.particles.push(particle);
  }

  update() {
    this.particles = this.particles.filter(p => {
      p.update();
      return p.life > 0;
    });
  }

  render(ctx) {
    this.particles.forEach(p => p.render(ctx));
  }
}
```

### 6.2 å±å¹•å¤–å‰”é™¤

```javascript
function isParticleOnScreen(particle, margin = 50) {
  return particle.x > -margin &&
         particle.x < canvas.width + margin &&
         particle.y > -margin &&
         particle.y < canvas.height + margin;
}

// ä»…æ¸²æŸ“å±å¹•å†…ç²’å­
particlePool.particles.forEach(p => {
  if (isParticleOnScreen(p)) {
    p.render(ctx);
  }
});
```

---

## ä¸ƒã€é…ç½®æ•°æ®æ±‡æ€»

```javascript
const BIOME_VISUAL_CONFIG = {
  forest: {
    skyColors: ['#88CC88'],
    particles: { type: 'leaf', config: LEAF_PARTICLE_CONFIG }
  },
  cherry_grove: {
    skyColors: ['#FFE4E1', '#FFC0CB'],
    particles: { type: 'petal', config: CHERRY_PARTICLE_CONFIG }
  },
  snow: {
    skyColors: ['#CCE6FF'],
    particles: { type: 'snowflake', config: SNOW_PARTICLE_CONFIG }
  },
  // ... å…¶ä»–ç¾¤ç³»é…ç½®
};
```

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.6.9*
*åˆ›å»ºæ—¥æœŸï¼š2026-02-15*
*ä¸‹ä¸€æ­¥ï¼šæ­¥éª¤5 - ç¾¤ç³»æ•Œäººä¸è£…é¥°è®¾è®¡ (v1.7.0)*

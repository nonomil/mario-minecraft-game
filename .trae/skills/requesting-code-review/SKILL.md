---
name: requesting-code-review
description: 当完成任务、实施主要功能或合并之前使用，以验证工作是否符合要求
---

# 请求代码审查

## 概述

通过调度 superpowers:receiving-code-review 类型的子代理，在问题级联之前捕捉它们。

**核心原则：** 尽早审查，经常审查。

**开始时声明：** “我正在请求代码审查以验证我刚刚完成的任务。”

## 何时请求

- **强制：** 在子代理驱动开发中的**每个任务**之后。
- **合并前：** 在将开发分支合并到 main 之前。
- **完成功能：** 即使是单人工作，在完成大块功能后也应自我审查或调度代理。

## 如何请求

1. **获取 git SHAs：**
   ```bash
   BASE_SHA=$(git rev-parse HEAD~1)
   HEAD_SHA=$(git rev-parse HEAD)
   ```

2. **调度代理：**
   使用 Task 工具，类型设为 `implementation` (或专门的 `code-reviewer` 如果可用)。

3. **提供信息：**
   - **实施了什么：** 简要摘要。
   - **要求/计划：** 链接到相关的计划文档。
   - **差异：** 提供 `git diff $BASE_SHA $HEAD_SHA`。

## 根据反馈行动

- **严重/重要：** 必须修复。
- **次要：** 记录并决定是否立即修复。
- **不同意：** 提供技术理由进行反驳。

## 危险信号

**切勿：**
- 因为“任务太小”而跳过审查。
- 在未修复严重审查意见的情况下继续下一个任务。
- 忽略对测试覆盖率的审查。
- 对客观的质量建议产生防御心理。

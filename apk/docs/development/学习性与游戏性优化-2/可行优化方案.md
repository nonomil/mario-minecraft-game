# V1 å¯è¡Œä¼˜åŒ–æ–¹æ¡ˆ

åŸºäºä»£ç å®é™…åˆ†æï¼Œç»“åˆä¸¤ä»½ä¼˜åŒ–å»ºè®®æ–‡æ¡£ï¼Œç­›é€‰å‡ºå¯è½åœ°çš„ä¼˜åŒ–é¡¹ã€‚
æ¯é¡¹æ ‡æ³¨æ”¹åŠ¨èŒƒå›´ã€æ¶‰åŠæ–‡ä»¶ã€å®ç°æ€è·¯ã€‚

---

## ä¸€ã€å­¦ä¹ ç³»ç»Ÿä¼˜åŒ–

### 1.1 å¢å¼ºé—´éš”å¤ä¹ ç®—æ³•

**ç°çŠ¶**ï¼š`11-game-init.js:113` å·²æœ‰åŸºç¡€é—´éš”å¤ä¹ ï¼Œä½¿ç”¨å›ºå®šé—´éš”æ•°ç»„ `[0, 3, 10, 28, 80, 220]`ï¼ŒæŒ‰å‡ºç°æ¬¡æ•°é€’å¢é—´éš”ã€‚ä½†ä¸åŒºåˆ†ç­”å¯¹/ç­”é”™ï¼Œæ‰€æœ‰å•è¯åŒç­‰å¯¹å¾…ã€‚

**æ”¹åŠ¨**ï¼šåœ¨ `buildWordPicker()` ä¸­å¼•å…¥ç­”é¢˜è´¨é‡å› å­ã€‚

```javascript
// 11-game-init.js - buildWordPicker() æ”¹é€ 
// ç°æœ‰: intervals = [0, 3, 10, 28, 80, 220]
// æ–°å¢: æ ¹æ®ç­”é¢˜ç»“æœè°ƒæ•´é—´éš”
const intervals = {
  correct_fast: [0, 5, 15, 40, 120, 300],   // ç§’ç­” â†’ é—´éš”æ‹‰é•¿
  correct_slow: [0, 3, 10, 28, 80, 220],     // çŠ¹è±«ç­”å¯¹ â†’ ä¿æŒåŸæœ‰
  wrong:        [0, 1, 3, 8, 20, 60]          // ç­”é”™ â†’ é—´éš”ç¼©çŸ­ï¼Œé¢‘ç¹å¤ç°
};
```

**å…·ä½“æ”¹æ³•**ï¼š
- `buildWordPicker()` çš„ `stats` å¯¹è±¡ä»ç®€å•è®¡æ•°æ”¹ä¸º `{ count, quality }` ç»“æ„
- `quality` ç”± `completeLearningChallenge()` å†™å…¥ï¼ˆåŸºäºç­”é¢˜æ­£ç¡®æ€§ + å“åº”æ—¶é—´ï¼‰
- `next()` é€‰è¯æ—¶æ ¹æ® quality é€‰æ‹©ä¸åŒé—´éš”è¡¨
- æ•°æ®æŒä¹…åŒ–åˆ° `progress.vocab[packId].wordStats`

**æ¶‰åŠæ–‡ä»¶**ï¼š`11-game-init.js`ã€`12-challenges.js`ã€`09-vocab.js`

---

### 1.2 æ‹¼å†™ç»ƒä¹ å¤šæ ·åŒ–

**ç°çŠ¶**ï¼š`12-challenges.js:112` çš„ `generateFillBlankChallenge()` åªéšè—å•ä¸ªå­—æ¯ï¼Œé¢˜å‹å•ä¸€ã€‚

**æ”¹åŠ¨**ï¼šæ–°å¢ 2 ç§å¡«ç©ºå˜ä½“ï¼Œå¤ç”¨ç°æœ‰ challenge æ¡†æ¶ã€‚

```javascript
// 12-challenges.js - æ–°å¢æŒ‘æˆ˜ç±»å‹

// å˜ä½“A: å¤šå­—æ¯å¡«ç©ºï¼ˆé€‚åˆè¾ƒé•¿å•è¯ï¼‰
function generateMultiBlankChallenge(wordObj) {
  const en = String(wordObj?.en || "").toLowerCase().replace(/[^a-z]/g, "");
  if (en.length < 4) return generateFillBlankChallenge(wordObj); // çŸ­è¯é€€å›å•å­—æ¯
  const blankCount = Math.min(2, Math.floor(en.length / 3));
  // éšæœºé€‰ blankCount ä¸ªä¸ç›¸é‚»ä½ç½®éšè—
  // é€‰é¡¹æ”¹ä¸ºå­—æ¯ç»„åˆæŒ‰é’®
  // ...
}

// å˜ä½“B: å­—æ¯æ’åºï¼ˆæ‹–æ‹½/ç‚¹å‡»æ’åºï¼‰
function generateUnscrambleChallenge(wordObj) {
  const en = String(wordObj?.en || "").toLowerCase();
  const scrambled = shuffle(en.split(""));
  // ç”¨ç°æœ‰ challengeOptionsEl æ¸²æŸ“ä¸ºå¯ç‚¹å‡»å­—æ¯åºåˆ—
  // ç©å®¶æŒ‰é¡ºåºç‚¹å‡»å­—æ¯æ‹¼å‡ºå•è¯
  // ...
}
```

**æ³¨å†Œåˆ°ç°æœ‰æ¡†æ¶**ï¼š
```javascript
// æ‰©å±• CHALLENGE_TYPES å’Œ CHALLENGE_TYPE_KEYS
CHALLENGE_TYPES.multi_blank = (wordObj) => generateMultiBlankChallenge(wordObj);
CHALLENGE_TYPES.unscramble = (wordObj) => generateUnscrambleChallenge(wordObj);
CHALLENGE_TYPE_KEYS.push("multi_blank", "unscramble");
```

**æ¶‰åŠæ–‡ä»¶**ï¼š`12-challenges.js`

---

### 1.3 ç­”é”™æ­£å‘å¼•å¯¼

**ç°çŠ¶**ï¼š`12-challenges.js:299` ç­”é”™åªæ‰£åˆ† + æ˜¾ç¤º "âŒ æŒ‘æˆ˜å¤±è´¥"ï¼Œæ²¡æœ‰æ•™å­¦åé¦ˆã€‚

**æ”¹åŠ¨**ï¼šç­”é”™åçŸ­æš‚å±•ç¤ºæ­£ç¡®ç­”æ¡ˆ + å•è¯å‘éŸ³ï¼Œå»¶è¿Ÿå…³é—­æŒ‘æˆ˜é¢æ¿ã€‚

```javascript
// 12-challenges.js - completeLearningChallenge() æ”¹é€ 
function completeLearningChallenge(correct) {
  if (!currentLearningChallenge) return;
  clearLearningChallengeTimer();

  const wordObj = currentLearningChallenge.wordObj;
  if (correct) {
    hideLearningChallenge();
    addScore(reward.correct.score);
    // ... ç°æœ‰é€»è¾‘
  } else {
    // æ–°å¢ï¼šç­”é”™åå±•ç¤ºæ­£ç¡®ç­”æ¡ˆ
    addScore(-reward.wrong.scorePenalty);
    showChallengeCorrection(wordObj); // æ–°å‡½æ•°
    // å»¶è¿Ÿ 2 ç§’åå…³é—­ï¼Œè®©ç©å®¶çœ‹åˆ°æ­£ç¡®ç­”æ¡ˆ
    setTimeout(() => {
      hideLearningChallenge();
      paused = challengePausedBefore;
      currentLearningChallenge = null;
      challengeOrigin = null;
    }, 2000);
    return; // æå‰è¿”å›ï¼Œä¸ç«‹å³æ¢å¤
  }
  // ... ç°æœ‰æ¢å¤é€»è¾‘
}

function showChallengeCorrection(wordObj) {
  // åœ¨ challengeQuestionEl ä¸­è¿½åŠ æ­£ç¡®ç­”æ¡ˆå±•ç¤º
  if (challengeQuestionEl) {
    challengeQuestionEl.innerHTML +=
      `<div class="challenge-correction">` +
      `<div>æ­£ç¡®ç­”æ¡ˆ: <strong>${wordObj.en}</strong> = ${wordObj.zh}</div>` +
      `</div>`;
  }
  // æ’­æ”¾æ­£ç¡®å‘éŸ³
  speakWord(wordObj);
}
```

**æ¶‰åŠæ–‡ä»¶**ï¼š`12-challenges.js`ï¼Œå°‘é‡ CSS

---

### 1.4 åˆ©ç”¨å·²æœ‰ phrase æ•°æ®å±•ç¤ºä¾‹å¥

**ç°çŠ¶**ï¼šè¯åº“æ•°æ®å·²åŒ…å« `phrase` å’Œ `phraseTranslation` å­—æ®µï¼ˆå¦‚ `"Smile happily"` / `"å¼€å¿ƒåœ°å¾®ç¬‘"`ï¼‰ï¼Œä½† `normalizeRawWord()` æ²¡æœ‰æå–è¿™äº›å­—æ®µï¼Œè¯å¡ä¹Ÿæ²¡æœ‰å±•ç¤ºã€‚

**æ”¹åŠ¨**ï¼š

```javascript
// 09-vocab.js - normalizeRawWord() æ‰©å±•
function normalizeRawWord(raw) {
  if (!raw || typeof raw !== "object") return null;
  const en = String(raw.standardized || raw.word || "").trim();
  const zh = String(raw.chinese || raw.zh || raw.translation || "").trim();
  if (!en) return null;
  return {
    en,
    zh: zh || "",
    phrase: String(raw.phrase || "").trim() || null,         // æ–°å¢
    phraseZh: String(raw.phraseTranslation || "").trim() || null, // æ–°å¢
    imageURLs: Array.isArray(raw.imageURLs) ? raw.imageURLs : []
  };
}
```

```javascript
// 12-challenges.js - showWordCard() æ‰©å±•
function showWordCard(wordObj) {
  // ... ç°æœ‰é€»è¾‘
  const phraseEl = document.getElementById("word-card-phrase");
  if (phraseEl && wordObj.phrase) {
    phraseEl.innerText = wordObj.phrase;
    phraseEl.style.display = "block";
  } else if (phraseEl) {
    phraseEl.style.display = "none";
  }
}
```

Game.html ä¸­è¯å¡åŒºåŸŸåŠ ä¸€è¡Œ `<div id="word-card-phrase">` å³å¯ã€‚

**æ¶‰åŠæ–‡ä»¶**ï¼š`09-vocab.js`ã€`12-challenges.js`ã€`Game.html`

---

## äºŒã€æ¸¸æˆæ€§ä¼˜åŒ–

### 2.1 éš¾åº¦æ›²çº¿å¹³æ»‘åŒ–

**ç°çŠ¶**ï¼š`05-difficulty.js:16` ä½¿ç”¨é˜¶æ¢¯å¼ tier æŸ¥æ‰¾ï¼Œ5 ä¸ªå›ºå®šæ¡£ä½ï¼ˆæ–°æ‰‹/ç®€å•/æ™®é€š/å›°éš¾/åœ°ç‹±ï¼‰ï¼Œåœ¨è¾¹ç•Œå¤„è·³å˜æ˜æ˜¾ã€‚`game.json:73-78` å®šä¹‰äº†è¿™äº› tierã€‚

**æ”¹åŠ¨**ï¼šåœ¨ tier ä¹‹é—´åšçº¿æ€§æ’å€¼ï¼Œæ¶ˆé™¤è·³å˜ã€‚ä¸æ”¹ JSON ç»“æ„ï¼Œåªæ”¹è®¡ç®—é€»è¾‘ã€‚

```javascript
// 05-difficulty.js - computeDifficultyState() æ”¹é€ 
function computeDifficultyState() {
  const cfg = getDifficultyConfig();
  const tiers = Array.isArray(cfg.tiers) ? cfg.tiers : [];
  const s = getProgressScore();

  // æ‰‹åŠ¨é€‰æ‹©éš¾åº¦æ—¶ä¿æŒåŸé€»è¾‘
  const selected = String(settings?.difficultySelection || "auto");
  if (selected !== "auto") {
    // ... ç°æœ‰å›ºå®šéš¾åº¦é€»è¾‘
  }

  // è‡ªåŠ¨éš¾åº¦ï¼šåœ¨ç›¸é‚» tier ä¹‹é—´çº¿æ€§æ’å€¼
  const tier = getDifficultyTier(s);
  const tierIdx = tiers.indexOf(tier);
  const nextTier = tiers[tierIdx + 1];

  let enemyDamageMult, enemyHpMult, enemySpawnMult, chestSpawnMult;

  if (nextTier && tier.maxScore < 999999) {
    // è®¡ç®—å½“å‰åˆ†æ•°åœ¨ tier åŒºé—´å†…çš„ä½ç½® (0~1)
    const range = tier.maxScore - tier.minScore;
    const t = range > 0 ? (s - tier.minScore) / range : 0;
    // çº¿æ€§æ’å€¼åˆ°ä¸‹ä¸€ä¸ª tier
    enemyDamageMult = tier.enemyDamage + (nextTier.enemyDamage - tier.enemyDamage) * t;
    enemyHpMult = tier.enemyHp + (nextTier.enemyHp - tier.enemyHp) * t;
    enemySpawnMult = tier.enemySpawn + (nextTier.enemySpawn - tier.enemySpawn) * t;
    chestSpawnMult = tier.chestSpawn + (nextTier.chestSpawn - tier.chestSpawn) * t;
  } else {
    // æœ€é«˜/æœ€ä½ tier ä¿æŒåŸå€¼
    enemyDamageMult = Number(tier.enemyDamage) || 1;
    enemyHpMult = Number(tier.enemyHp) || 1;
    enemySpawnMult = Number(tier.enemySpawn) || 1;
    chestSpawnMult = Number(tier.chestSpawn) || 1;
  }

  // DDA å åŠ é€»è¾‘ä¸å˜ ...
}
```

**æ¶‰åŠæ–‡ä»¶**ï¼š`05-difficulty.js`ï¼ˆä»…æ­¤ä¸€ä¸ªæ–‡ä»¶ï¼‰

---

### 2.2 å­¦ä¹ æ¨¡å¼å¢å¼ºï¼ˆä½å‹åŠ›æ¨¡å¼ï¼‰

**ç°çŠ¶**ï¼šå·²æœ‰ `settings.learningMode` å¼€å…³ï¼Œæ•ˆæœæ˜¯æ•Œäººå‡å°‘ 40%ã€ä¼¤å®³é™ä½ 15%ã€å•è¯å‡ºç°ç‡æé«˜ã€‚ä½†ç­”é”™ä»ç„¶æ‰£åˆ†ã€‚

**æ”¹åŠ¨**ï¼šå­¦ä¹ æ¨¡å¼ä¸‹ç­”é”™ä¸æ‰£åˆ†ï¼Œæ”¹ä¸º"é‡è¯•"æœºåˆ¶ã€‚

```javascript
// 12-challenges.js - completeLearningChallenge() ä¸­
if (!correct) {
  if (settings.learningMode) {
    // å­¦ä¹ æ¨¡å¼ï¼šä¸æ‰£åˆ†ï¼Œæ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆåè‡ªåŠ¨é‡è¯•
    showChallengeCorrection(wordObj);
    showFloatingText("ğŸ’¡ å†è¯•ä¸€æ¬¡", player.x, player.y - 40);
    setTimeout(() => {
      hideLearningChallenge();
      // åŒä¸€ä¸ªè¯é‡æ–°å‡ºé¢˜ï¼ˆæ¢ä¸ªé¢˜å‹ï¼‰
      startLearningChallenge(wordObj, null, challengeOrigin);
    }, 2500);
    return;
  }
  // éå­¦ä¹ æ¨¡å¼ä¿æŒåŸæœ‰æ‰£åˆ†é€»è¾‘
  addScore(-reward.wrong.scorePenalty);
  // ...
}
```

**æ¶‰åŠæ–‡ä»¶**ï¼š`12-challenges.js`

---

### 2.3 æ¸¸æˆç»“æŸç»Ÿè®¡å¢å¼º

**ç°çŠ¶**ï¼š`10-ui.js:36-41` æ¸¸æˆç»“æŸç•Œé¢æ˜¾ç¤ºå­¦ä¹ å•è¯æ•°ã€é’»çŸ³ã€ç§¯åˆ†ã€å‡»æ€ã€ç­‰çº§ï¼Œä½†æ²¡æœ‰å±•ç¤ºæœ¬å±€å­¦åˆ°äº†å“ªäº›è¯ã€‚

**æ”¹åŠ¨**ï¼šåˆ©ç”¨å·²æœ‰çš„ `sessionCollectedWords` æ•°ç»„ï¼Œåœ¨ Game Over ç•Œé¢å±•ç¤ºæœ¬å±€æ”¶é›†çš„å•è¯åˆ—è¡¨ã€‚

```javascript
// 10-ui.js - setOverlay() gameover åˆ†æ”¯ä¸­
if (text) {
  const level = Math.max(1, Math.floor(score / 1000) + 1);
  const uniqueWords = getUniqueSessionWords();
  const wordListHtml = uniqueWords.length
    ? uniqueWords.slice(0, 8).map(w => `<span class="gameover-word">${w.en}</span>`).join(" ")
    : "æ— ";
  text.innerHTML =
    `ğŸ“š å­¦ä¹ å•è¯: ${getLearnedWordCount()}<br>` +
    `ğŸ’ é’»çŸ³: ${diamonds}<br>` +
    `â­ å½“å‰ç§¯åˆ†: ${score}<br>` +
    `âš”ï¸ å‡»æ€æ•Œäºº: ${enemyKillStats.total || 0}<br>` +
    `ğŸ… ç©å®¶ç­‰çº§: ${level}<br>` +
    `<div class="gameover-words">æœ¬å±€å•è¯: ${wordListHtml}</div>`;
}
```

**æ¶‰åŠæ–‡ä»¶**ï¼š`10-ui.js`ï¼Œå°‘é‡ CSS

---

## ä¸‰ã€UI/UX ä¼˜åŒ–

### 3.1 è¯å¡å±•ç¤ºæ—¶é—´å¯é…ç½®

**ç°çŠ¶**ï¼š`12-challenges.js:30-33` è¯å¡å›ºå®šæ˜¾ç¤º 900ms åæ¶ˆå¤±ï¼Œå¯¹ä½é¾„å„¿ç«¥å¯èƒ½å¤ªå¿«ã€‚

**æ”¹åŠ¨**ï¼šå°† 900ms æ”¹ä¸ºä» settings è¯»å–ï¼Œå¹¶åœ¨è®¾ç½®é¢æ¿ä¸­æš´éœ²ã€‚

```javascript
// 12-challenges.js - showWordCard()
setTimeout(() => {
  card.classList.remove("visible");
  card.setAttribute("aria-hidden", "true");
}, settings.wordCardDuration || 900);  // ä» settings è¯»å–
```

åœ¨è®¾ç½®é¢æ¿ä¸­å¢åŠ ä¸€ä¸ª"è¯å¡æ˜¾ç¤ºæ—¶é•¿"æ»‘å—ï¼ˆçŸ­/ä¸­/é•¿ â†’ 600/900/2000msï¼‰ã€‚

**æ¶‰åŠæ–‡ä»¶**ï¼š`12-challenges.js`ã€`09-vocab.js`ï¼ˆnormalizeSettings åŠ é»˜è®¤å€¼ï¼‰ã€`Game.html`ï¼ˆè®¾ç½®é¢æ¿ï¼‰

---

### 3.2 æŒ‘æˆ˜é¢‘ç‡å¯è§†åŒ–è°ƒèŠ‚

**ç°çŠ¶**ï¼š`12-challenges.js:183` æŒ‘æˆ˜è§¦å‘æ¦‚ç‡ç”± `settings.challengeFrequency` æ§åˆ¶ï¼ˆé»˜è®¤ 0.3ï¼‰ï¼Œä½†ç”¨æˆ·ä¸çŸ¥é“è¿™ä¸ªæ•°å­—æ„å‘³ç€ä»€ä¹ˆã€‚

**æ”¹åŠ¨**ï¼šè®¾ç½®é¢æ¿ä¸­å°†æ•°å­—æ»‘å—æ”¹ä¸ºè¯­ä¹‰åŒ–é€‰é¡¹ã€‚

```javascript
// è®¾ç½®é¢æ¿ HTML
// æ›¿æ¢åŸæœ‰çš„æ•°å­—æ»‘å—ä¸ºï¼š
// "æŒ‘æˆ˜é¢‘ç‡: [å¾ˆå°‘ | é€‚ä¸­ | é¢‘ç¹]"
const CHALLENGE_FREQ_PRESETS = {
  "å¾ˆå°‘": 0.15,
  "é€‚ä¸­": 0.3,
  "é¢‘ç¹": 0.5
};
```

**æ¶‰åŠæ–‡ä»¶**ï¼š`Game.html`ï¼ˆè®¾ç½®é¢æ¿ï¼‰ã€`16-events.js`ï¼ˆäº‹ä»¶ç»‘å®šï¼‰

---

## å››ã€æŠ€æœ¯ä¼˜åŒ–

### 4.1 ç²’å­å¯¹è±¡æ± 

**ç°çŠ¶**ï¼š`06-biome.js:221-248` çš„ `spawnBiomeParticles()` æ¯å¸§ new ç²’å­å¯¹è±¡ï¼ŒGC å‹åŠ›å¤§ã€‚`15-entities-particles.js` å®šä¹‰äº† Snowflakeã€LeafParticle ç­‰ç±»ï¼Œæ¯æ¬¡éƒ½æ˜¯ new åˆ›å»ºã€‚

**æ”¹åŠ¨**ï¼šä¸ºé«˜é¢‘ç²’å­ç±»å‹å¼•å…¥ç®€å•å¯¹è±¡æ± ã€‚

```javascript
// 15-entities-particles.js é¡¶éƒ¨æ–°å¢
class ParticlePool {
  constructor(ParticleClass, size = 50) {
    this._pool = [];
    this._Class = ParticleClass;
    for (let i = 0; i < size; i++) this._pool.push(new ParticleClass(0, 0));
  }
  acquire(x, y) {
    const p = this._pool.length ? this._pool.pop() : new this._Class(x, y);
    p.x = x; p.y = y; p.life = 1.0; p.remove = false;
    return p;
  }
  release(p) { this._pool.push(p); }
}

const snowflakePool = new ParticlePool(Snowflake, 40);
const leafPool = new ParticlePool(LeafParticle, 30);
const dustPool = new ParticlePool(DustParticle, 30);
```

```javascript
// 06-biome.js - spawnBiomeParticles() æ”¹ç”¨å¯¹è±¡æ± 
if (biome.effects?.particles === "snowflakes" && Math.random() < 0.2) {
  particles.push(snowflakePool.acquire(baseX, -10));
}
```

ç²’å­ remove æ—¶å›æ”¶ï¼š
```javascript
// 13-game-loop.js ä¸­ç²’å­æ¸…ç†é€»è¾‘
particles = particles.filter(p => {
  if (p.remove || p.life <= 0) {
    // å›æ”¶åˆ°å¯¹åº”æ± 
    if (p instanceof Snowflake) snowflakePool.release(p);
    else if (p instanceof LeafParticle) leafPool.release(p);
    else if (p instanceof DustParticle) dustPool.release(p);
    return false;
  }
  return true;
});
```

**æ¶‰åŠæ–‡ä»¶**ï¼š`15-entities-particles.js`ã€`06-biome.js`ã€`13-game-loop.js`

---

### 4.2 å±å¹•å¤–å®ä½“æ›´æ–°èŠ‚æµä¼˜åŒ–

**ç°çŠ¶**ï¼š`13-game-loop.js:5-13` å·²æœ‰ `optimizedUpdate()` å¯¹å±å¹•å¤–å®ä½“æ¯ 3 å¸§æ›´æ–°ä¸€æ¬¡ï¼Œä½†åªç”¨äºéƒ¨åˆ†å®ä½“ã€‚

**æ”¹åŠ¨**ï¼šå°†æ­¤ä¼˜åŒ–æ‰©å±•åˆ°è£…é¥°ç‰©å’Œç²’å­æ›´æ–°ã€‚

```javascript
// 13-game-loop.js - è£…é¥°ç‰©æ›´æ–°ä¹Ÿç”¨ optimizedUpdate
decorations.forEach(d => {
  optimizedUpdate(d, () => d.update?.());
});
```

**æ¶‰åŠæ–‡ä»¶**ï¼š`13-game-loop.js`

---

### 4.3 åˆ é™¤åºŸå¼ƒçš„ main.js

**ç°çŠ¶**ï¼š`src/main.js`ï¼ˆ7,683 è¡Œï¼‰æ˜¯æ‹†åˆ†å‰çš„é—ç•™æ–‡ä»¶ï¼ŒGame.html å·²ä¸å¼•ç”¨å®ƒã€‚

**æ”¹åŠ¨**ï¼šç›´æ¥åˆ é™¤ `src/main.js`ï¼Œå‡å°‘ä»“åº“ä½“ç§¯å’Œç»´æŠ¤å›°æƒ‘ã€‚

---

## äº”ã€ä¼˜å…ˆçº§æ’åº

| ä¼˜å…ˆçº§ | ä¼˜åŒ–é¡¹ | æ”¹åŠ¨é‡ | é£é™© | æ”¶ç›Š |
|--------|--------|--------|------|------|
| P0 | 1.3 ç­”é”™æ­£å‘å¼•å¯¼ | å° | ä½ | å­¦ä¹ ä½“éªŒæ ¸å¿ƒæ”¹å–„ |
| P0 | 1.4 å±•ç¤ºå·²æœ‰ä¾‹å¥æ•°æ® | å° | ä½ | é›¶æˆæœ¬åˆ©ç”¨ç°æœ‰æ•°æ® |
| P0 | 2.2 å­¦ä¹ æ¨¡å¼ç­”é”™ä¸æ‰£åˆ† | å° | ä½ | ä½é¾„ç”¨æˆ·å‹å¥½ |
| P1 | 2.1 éš¾åº¦æ›²çº¿å¹³æ»‘åŒ– | ä¸­ | ä½ | æ¶ˆé™¤æŒ«è´¥æ„Ÿè·³å˜ |
| P1 | 1.1 å¢å¼ºé—´éš”å¤ä¹ ç®—æ³• | ä¸­ | ä¸­ | è®°å¿†æ•ˆæœæå‡ |
| P1 | 1.2 æ‹¼å†™ç»ƒä¹ å¤šæ ·åŒ– | ä¸­ | ä½ | é¢˜å‹ä¸°å¯Œåº¦ |
| P2 | 2.3 æ¸¸æˆç»“æŸç»Ÿè®¡å¢å¼º | å° | ä½ | å­¦ä¹ æˆå°±æ„Ÿ |
| P2 | 3.1 è¯å¡æ—¶é•¿å¯é…ç½® | å° | ä½ | é€‚é…ä¸åŒå¹´é¾„ |
| P2 | 3.2 æŒ‘æˆ˜é¢‘ç‡è¯­ä¹‰åŒ– | å° | ä½ | è®¾ç½®æ˜“ç”¨æ€§ |
| P2 | 4.1 ç²’å­å¯¹è±¡æ±  | ä¸­ | ä½ | æ€§èƒ½ä¼˜åŒ– |
| P3 | 4.2 å±å¹•å¤–å®ä½“èŠ‚æµ | å° | ä½ | æ€§èƒ½å¾®ä¼˜åŒ– |
| P3 | 4.3 åˆ é™¤åºŸå¼ƒ main.js | æ—  | æ—  | ä»“åº“æ•´æ´ |

---

## å…­ã€æ˜ç¡®ä¸åšçš„äº‹é¡¹

ä»¥ä¸‹æ˜¯ä¸¤ä»½ä¼˜åŒ–æ–‡æ¡£ä¸­æåˆ°ä½†ä¸é€‚åˆå½“å‰é¡¹ç›®çš„å»ºè®®ï¼š

1. **Canvas åˆ†å±‚æ¸²æŸ“** â€” æ”¹é€ æˆæœ¬æé«˜ï¼Œéœ€é‡å†™æ•´ä¸ªæ¸²æŸ“ç®¡çº¿ï¼Œæ”¶ç›Šä¸ç¡®å®š
2. **å¼•å…¥ Vite/æ„å»ºå·¥å…·** â€” ç ´å"æ‰“å¼€ HTML å³ç©"çš„æ ¸å¿ƒä¼˜åŠ¿
3. **å®¶é•¿æ§åˆ¶é¢æ¿/æ•™å¸ˆå·¥å…·** â€” è¶…å‡ºå•æœºæ¸¸æˆå®šä½ï¼Œéœ€è¦åç«¯æ”¯æŒ
4. **å¤šè¯­è¨€æ¡†æ¶** â€” é¡¹ç›®å®šä½æ˜¯è‹±è¯­å­¦ä¹ ï¼Œå¤šè¯­è¨€æ˜¯ä¼ªéœ€æ±‚
5. **ç¤¾äº¤åˆ†äº«/æ•°æ®åŸ‹ç‚¹** â€” éœ€è¦æœåŠ¡å™¨ï¼Œè¶…å‡ºçº¯å‰ç«¯æ¶æ„
6. **è§’è‰²çš®è‚¤ç³»ç»Ÿ** â€” Canvas åƒç´ é£è§’è‰²æ¢çš®å·¥ä½œé‡å¤§ï¼ŒæŠ•å…¥äº§å‡ºæ¯”ä½
7. **åˆ†å±‚éŸ³ä¹æ··åˆ** â€” è¿‡åº¦è®¾è®¡ï¼Œç°æœ‰ BGM + éŸ³æ•ˆå·²æ»¡è¶³éœ€æ±‚
8. **COPPA éšç§åˆè§„** â€” æ•°æ®å…¨åœ¨ LocalStorageï¼Œæ— ç½‘ç»œä¼ è¾“ï¼Œä¸é€‚ç”¨
9. **æ­¦å™¨å…‹åˆ¶ç³»ç»Ÿ** â€” å¢åŠ å¤æ‚åº¦ä½†å¯¹å­¦ä¹ ç›®æ ‡æ— å¸®åŠ©
10. **SM-2 å®Œæ•´ç®—æ³•** â€” è¿‡äºå­¦æœ¯åŒ–ï¼Œç®€åŒ–ç‰ˆé—´éš”å¤ä¹ ï¼ˆ1.1 æ–¹æ¡ˆï¼‰æ›´é€‚åˆæ¸¸æˆåœºæ™¯

---
name: writing-plans
description: 当你有多步任务的规格或要求时，在接触代码之前使用 - 创建详细、原子的实施步骤以引导工程师
---

# 编写计划

## 概述

编写全面的实施计划，假设执行者对代码库完全没有背景知识。记录他们需要知道的一切：要接触的文件、测试方法、具体的代码段。

**核心原则：** 计划越详细，执行越可靠。

**开始时声明：** “我正在使用编写计划技能来创建实施计划。”

## 计划文档结构

**保存位置：** `docs/plans/YYYY-MM-DD-<feature-name>.md`

### 1. 计划头
```markdown
# [功能名称] 实施计划

> **给 Claude:** 必需子技能：使用 superpowers:executing-plans 来逐任务实施此计划。

**目标：** [一句话描述]
**架构：** [2-3 句话方法]
```

### 2. 任务结构 (原子性)
每个任务应该是 2-5 分钟的动作。

```markdown
### 任务 N：[名称]
**文件：**
- 修改：`path/to/file.py:12-34`
- 测试：`tests/test_file.py`

**步骤 1：编写失败的测试**
[完整代码块]

**步骤 2：运行并验证失败**
`pytest path/to/test.py`

**步骤 3：编写最小实施**
[完整代码块]

**步骤 4：运行并验证通过**

**步骤 5：提交**
`git commit -m "..."`
```

## 记住

- **使用确切路径：** 不要写模糊的“auth 文件”。
- **包含完整代码：** 避免“在此处添加逻辑”之类的模糊描述。
- **DRY, YAGNI, TDD, 频繁提交。**

## 常见错误

- **任务太大：** 一个任务包含了多个不相关的更改。将其分解。
- **缺少测试步骤：** 假设执行者会自动知道如何测试。
- **路径错误：** 导致执行时找不到文件。

## 危险信号

**切勿：**
- 在没有研究代码库的情况下编写计划。
- 忽略错误处理步骤。
- 在计划中使用伪代码。
- 忘记包含提交步骤。

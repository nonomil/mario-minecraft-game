---
name: document-driven-verification
description: 当需要通过正式规格和证据来验证系统状态或功能实现时使用 - 超越简单测试，通过文档化的比较来确认事实
---

# 文档驱动验证

## 概述

文档驱动验证是将“我们说要做的”与“我们实际做的”进行正式比较的过程。它产生一份不可辩驳的证据清单。

**核心原则：** 规格即标准，证据即事实。

**开始时声明：** “我正在执行文档驱动验证，以交叉引用规格与实施证据。”

## 工作流程

### 1. 建立基准规格
阅读 `docs/plans/` 或 `docs/features/` 中的相关文档。列出所有显式和隐式的要求。

### 2. 收集证据
对于每个要求，运行命令并捕获输出。证据可以包括：
- 测试运行日志。
- `grep` 搜索结果证明代码存在。
- 命令行工具的输出。
- API 响应截图或 JSON。

### 3. 创建验证矩阵
在对话或临时文档中创建一个表格：

| 要求 | 实施证据 | 状态 |
|------|----------|------|
| 实施哈希加密 | `grep "bcrypt.hash" src/auth.js` | ✅ |
| 登录失败返回 401 | `curl` 输出显示 401 状态码 | ✅ |
| 密码长度验证 | `npm test` 中 `password_len` 通过 | ✅ |

### 4. 差距分析
识别任何规格与实施之间的不一致。

## 何时使用

- **在重大发布前：** 确保没有遗漏任何小功能。
- **在复杂的重构后：** 确保所有旧的行为都被保留。
- **在合规性检查时：** 验证安全和法律要求。

## 危险信号

**切勿：**
- 依赖口头确认。
- 跳过对“隐式”要求的验证（例如：性能）。
- 在没有捕获实际输出的情况下标记“已验证”。
- 忽略矩阵中的任何空缺。

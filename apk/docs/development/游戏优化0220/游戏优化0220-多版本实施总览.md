# 游戏优化0220 - 多版本实施总览

## 1. 目标范围

- 需求13：室内文案乱码、字体布局与村民尺寸优化
- 需求14：BOSS 血量翻倍、血条显示、BOSS 战武器强制剑模式
- 需求15：商人房交易、护甲购买、防晒霜道具体系
- 需求16：末影珍珠触发 1 分钟隐身（或免伤）
- 需求17：小 BOSS 轮换，不再固定凋零

## 2. 版本拆分

- `v1.18.18`（P0）：村庄室内显示与村民尺寸
- `v1.18.19`（P0）：BOSS 战斗稳定性（血量/血条/武器锁定）+ 小 BOSS 轮换
- `v1.18.20`（P1）：商人交易与护甲商店主流程
- `v1.18.21`（P1）：防晒霜与环境减伤体系
- `v1.18.22`（P1）：末影珍珠隐身机制与敌人目标逻辑联动

## 3. 执行顺序理由

- 先做 P0（视觉与战斗可用性）快速提升可玩性并降低回归风险。
- 再做经济系统（交易/护甲），最后做状态型能力（隐身）以减少跨模块耦合冲突。

## 4. 基线约束

- 每个版本单独提交、单独验证、单独回滚点。
- 不跨版本混改：当前版本只改本版本列出的文件。
- 每版本至少执行：`node --check` + 关键流程手测。

## 5. 跨版本风险

- 村庄系统与 BOSS 系统都挂在主循环，易出现状态互斥问题。
- 新增状态（防晒霜/隐身）与既有无敌帧/火抗 Buff 可能冲突。
- 商店经济若定价不当会破坏钻石资源平衡。

## 6. 统一验收门槛

- 功能可触发：100% 可复现，不依赖随机运气。
- UI 可读：无乱码、文案清晰、移动端不溢出。
- 战斗可完成：BOSS 战没有因武器切换导致“无法攻击”的死局。
- 经济可闭环：可卖、可买、可生效、可失效、可保存。

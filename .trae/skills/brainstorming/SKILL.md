---
name: brainstorming
description: 当要求启动任何新功能、进行重大重构、复杂的 Bug 修复或从头开始创建新项目时使用
---

# 头脑风暴

## 概述

头脑风暴是实施前的深思熟虑。它确保我们在接触代码之前就架构、范围和方法达成一致。

**核心原则：** 通过隔离分支上的文档实现深思熟虑的发现。

**开始时声明：** “我正在使用头脑风暴技能来启动此工作流程。”

## 工作流程步骤

### 第 1 阶段：分支设置（必需）

**切勿在 main 分支上头脑风暴。**

1. 创建带有描述性名称的新 git 分支。
2. 创建一个名为 `docs/features/<feature-name>.md` 的功能文档。

### 第 2 阶段：发现与范围

1. **研究：** 使用 Grep、SearchCodebase 和 Read 来理解受影响的区域。
2. **分析：** 在功能文档中列出约束、假设和潜在风险。
3. **范围：** 定义明确的“范围内”和“范围外”列表。

### 第 3 阶段：提议与协作

1. **提议：** 在功能文档中概述提议的方法。包括：
   - 架构变更
   - API 更改
   - 数据结构更改
   - 外部依赖项
2. **审查：** 向用户展示提议并请求反馈。
3. **迭代：** 根据反馈更新功能文档。

### 第 4 阶段：切换到实施

一旦用户批准：

1. **创建 Worktree（必需）：** 使用 superpowers:using-git-worktrees 创建专用的隔离环境。
2. **编写计划：** 使用 superpowers:writing-plans 在新 worktree 中创建实施计划。

## 功能文档模板

```markdown
# [功能名称] 功能规格

## 概述
[一句话描述它是什么以及为什么我们需要它]

## 范围内
- [ ] 关键功能 1
- [ ] 关键功能 2

## 范围外
- [ ] 以后再做的事情
- [ ] 我们决定不处理的边界情况

## 提议的方法
[架构、API 和逻辑的详细说明]

## 风险与约束
- [ ] 潜在的破坏性更改
- [ ] 性能考虑
- [ ] 安全性

## 批准
- [ ] 用户批准（日期：YYYY-MM-DD）
```

## 快速参考

| 情况 | 行动 |
|-----------|--------|
| 用户请求功能 | 启动头脑风暴 |
| 用户请求重构 | 启动头脑风暴 |
| 设计获得批准 | 切换到 using-git-worktrees |
| 分歧 | 在功能文档中记录并讨论 |

## 常见错误

- **跳过分支：** 直接在 main 上工作会导致污染。
- **跳过文档：** 仅仅口头讨论会导致误解。
- **过早实施：** 在批准前编写代码会造成浪费。

## 危险信号

**切勿：**
- 在 main 分支上进行头脑风暴。
- 在没有批准的功能规格的情况下开始实施。
- 跳过范围内/范围外定义。
- 忽略项目约束。

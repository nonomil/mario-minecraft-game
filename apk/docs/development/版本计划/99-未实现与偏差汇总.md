# 未实现与偏差汇总（对照 `apk/docs/development/版本计划`）

编制日期：2026-02-16（初版）  
更新日期：2026-02-16（三次复核，按 `apk/` 实际代码重审）

审计范围：以 `apk/` 目录为准，重点核对 `apk/src/modules/`、`apk/config/biomes.json`、`apk/Game.html`。  
路径口径：版本计划文档写的 `src/...` 在 APK 侧对应 `apk/src/...`。

## 本次重审结论

旧版汇总中“`v1.10.3~v1.11.2` 大量未实现”的结论已过时。  
当前 `apk/` 代码显示：这几版大部分已落地。真正的主缺口集中在 `v1.12.0~v1.15.0`。

## 最新实现状态总表（按计划文档）

| 计划文档 | `apk/` 状态 | 备注 |
|---|---|---|
| `01-v1.9.0` BOSS+村庄 | ✅ 已实现 | BOSS 与村庄链路在用。 |
| `02-v1.9.1` 新装饰链路 | ✅ 已实现 | 装饰生成/渲染链路已打通。 |
| `03-v1.9.2` 新敌人链路 | ✅ 已实现 | 新敌人生成与渲染分支已接入。 |
| `04-v1.9.3` 调试工具 | ✅ 已实现 | `apk/tests/debug-pages/GameDebug.html` 可用。 |
| `05-v1.10.0` 火山背景 | ✅ 已实现 | 火山背景函数与绘制流程已在 `apk/`。 |
| `06-v1.10.1` 深暗之域增强 | ✅ 已实现 | Warden/噪音/视野限制已在 `apk/`。 |
| `07-v1.10.2` 宝箱经济重平衡 | ✅ 已实现 | 掉落表类型与逻辑存在。 |
| `08-v1.10.3` 海滨环境修复 | ✅ 已实现 | 海滨禁召唤、shell/starfish 尺寸、贝壳变体、权重均已落地。 |
| `09-v1.11.0` 蘑菇森林视觉 | ✅ 已实现 | 孢子粒子、伞盖浮动、斑点增强已落地。 |
| `10-v1.11.1` 樱花丛林视觉 | ✅ 已实现 | 樱花树冠细节、花瓣飘落、权重调整已落地。 |
| `11-v1.11.2` 雪傀儡与猪灵 | ✅ 已实现 | `snow_block` 链路、雪傀儡新配方、猪灵权重提升已落地。 |
| `12-v1.11.3` 海洋手感与高温掉血节奏 | ⚠️ 部分实现 | 海洋手感已调；高温掉血仍按帧，不是毫秒真实时间。 |
| `13-v1.12.0` 学习反馈核心优化 | ❌ 未实现 | 纠错反馈/例句提取/词卡例句/学习模式重试未落地到 `apk/`。 |
| `14-v1.13.0` 学习算法与题型增强 | ❌ 未实现 | 质量感知间隔、难度平滑、新题型未落地。 |
| `15-v1.14.0` UI与性能优化 | ❌ 未实现 | 词卡时长可配、语义化挑战频率、GameOver词汇展示未落地。 |
| `16-v1.15.0` 技术清理与微优化 | ⚠️ 部分实现 | `apk/src/main.js` 已不存在；但装饰/粒子未纳入 off-screen 节流。 |

## 当前真正未实现/部分实现清单（按优先级）

### P1：`v1.12.0`（学习反馈核心优化）未实现

- [ ] 答错后展示正确答案并延时关闭（`showChallengeCorrection`）
- [ ] `normalizeRawWord()` 提取 `phrase` / `phraseTranslation`
- [ ] 词卡增加 `word-card-phrase` 展示
- [ ] 学习模式下“答错不扣分 + 自动重试”

代码证据：
- `apk/src/modules/12-challenges.js:20`（词卡只显示 en/zh）
- `apk/src/modules/12-challenges.js:284`（答错直接扣分结束）
- `apk/src/modules/09-vocab.js:250`（未提取 phrase 字段）
- `apk/Game.html:64`（无 `word-card-phrase` 元素）

### P1：`v1.13.0`（学习算法与题型增强）未实现

- [ ] 质量感知复习间隔（`correct_fast/correct_slow/wrong`）
- [ ] `updateWordQuality()` 接口
- [ ] 难度参数平滑插值（auto 模式）
- [ ] 新题型 `multi_blank` / `unscramble`

代码证据：
- `apk/src/modules/11-game-init.js:129`（仍为固定 `intervals`）
- `apk/src/modules/12-challenges.js:159`（仅 `translate/listen/fill_blank`）
- `apk/src/modules/05-difficulty.js:31`（仍基于 tier 直接取值）

### P2：`v1.14.0`（UI与性能优化）未实现

- [ ] GameOver 展示“本局词汇清单”
- [ ] 词卡时长配置项（`opt-word-card-duration`）
- [ ] 语义化挑战频率选择（`opt-challenge-frequency`）
- [ ] 计划中的 `ParticlePool`（按该版本文档口径）

代码证据：
- `apk/src/modules/10-ui.js:31`（GameOver 无词汇列表）
- `apk/Game.html:131`（仍是 `opt-challenge-freq` 滑杆）
- `apk/src/modules/12-challenges.js:30`（词卡固定 `900ms`）
- `apk/src/modules/16-events.js`（无上述新控件绑定）

### P2：`v1.11.3` 部分未完成

- [ ] 高温掉血改为真实时间（毫秒累计）

已完成部分：
- [x] 海洋游泳手感参数与行为已调整

代码证据：
- `apk/src/modules/06-biome.js:124`
- `apk/src/modules/06-biome.js:126`（`biomeHeatDotTimer >= 3600` 按帧）
- `apk/src/modules/13-game-loop.js:37`（海洋水下控制分支）

### P3：`v1.15.0` 部分未完成

- [ ] 装饰物更新纳入 `optimizedUpdate`
- [ ] 粒子更新纳入 `optimizedUpdate`

已完成部分：
- [x] `apk/src/main.js` 不存在（清理项已满足）

代码证据：
- `apk/src/modules/13-game-loop.js:5`（`optimizedUpdate` 存在）
- `apk/src/modules/13-game-loop.js:176`（装饰仍 `d.update()`）
- `apk/src/modules/13-game-loop.js:185`（粒子仍直接更新）

## 已确认落地（修正文档误判）

以下在 `apk/` 已落地，不应再归类为“未实现”：

- `v1.10.3`：  
  `apk/src/modules/13-game-loop.js:963`、`apk/src/modules/13-game-loop.js:970`、  
  `apk/src/modules/15-entities-decorations.js:302`、`apk/src/modules/14-renderer-decorations.js:371`、  
  `apk/config/biomes.json:237`

- `v1.11.1`：  
  `apk/src/modules/21-decorations-new.js:22`、`apk/src/modules/21-decorations-new.js:569`、  
  `apk/src/modules/21-decorations-new.js:673`、`apk/config/biomes.json:317`

- `v1.11.2`：  
  `apk/src/modules/13-game-loop.js:963`、`apk/src/modules/01-config.js:138`、  
  `apk/src/modules/15-entities-decorations.js:137`、`apk/src/modules/11-game-init.js:426`

## 建议下一步

1. 先补齐 `v1.12.0` 与 `v1.13.0`（学习链路核心缺口）。  
2. 再补 `v1.14.0` 的设置 UI 与词卡时长配置。  
3. 最后收敛 `v1.11.3` 与 `v1.15.0` 的“部分实现”项。  

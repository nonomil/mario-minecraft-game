# 版本更新记录

## v1.4.0 (2026-02-14)

### ✨ 新功能
- **BOSS战系统** - 全新的BOSS战框架 + 凋零BOSS
  - BOSS基类与战场管理器：支持阶段切换、血条UI、奖励结算
  - 凋零BOSS：三阶段战斗（警戒→暴怒→狂暴）
  - 阶段一：缓慢飘移，每3秒发射黑球
  - 阶段二：变红，扇形弹幕+冲刺攻击
  - 阶段三：固定中央，全方位追踪弹
  - 分数达到2000时自动触发BOSS战
  - 击败获得500分+5铁块+钻石盔甲

### 🔧 技术改进
- 新增 `15-entities-boss.js` 模块：Boss基类、BossArena、WitherBoss
- 近战攻击可对BOSS造成伤害
- 弓箭可对BOSS造成伤害
- BOSS血条显示当前阶段
- BOSS弹幕系统（黑球、追踪弹）

---

## v1.3.2 (2026-02-14)

### ✨ 新功能
- **召唤系统重构** - 移除旧召唤按钮，改为背包点击召唤
  - 🎃 点击南瓜(×1)召唤雪傀儡
  - 🧱 点击铁块(×3)召唤铁傀儡
  - 背包中显示召唤提示（南瓜→⛄，铁块×3→🗿）
  - 材料不足时显示当前数量提示

### 🔧 技术改进
- 移除旧的独立召唤按钮（🗿）及其HTML/事件/键盘快捷键
- 召唤消耗量调整：铁块10→3，南瓜10→1
- 南瓜不再作为回血物品，改为纯召唤材料

---

## v1.3.1 (2026-02-14)

### ✨ 新功能
- **背包物品点击交互** - 背包中物品可直接点击使用
  - 🥩🍖🍲 点击食物回血1点生命，3秒冷却防误点
  - 🛡️ 点击盔甲从背包直接装备穿戴
  - 支持卸下当前护甲
  - 满血时食物/回血物品灰显不可用
  - 冷却中食物半透明并显示⏳标识

### 🔧 技术改进
- 食物冷却计时器集成到游戏主循环
- 背包装备区重构：支持点击装备/卸下盔甲
- 新增 `equipArmorFromBackpack`、`unequipArmorFromBackpack` 全局函数

---

## v1.3.0 (2026-02-14)

### ✨ 新功能
- **食物回血系统** - 新增三种食物物品
  - 🥩 牛肉：宝箱掉落，回复1点生命
  - 🍖 羊肉：宝箱掉落，回复1点生命
  - 🍲 蘑菇煲：稀有宝箱掉落，回复1点生命
  - 背包中点击食物即可使用回血
  - 新增 `FOOD_TYPES` 常量定义

### 🔧 技术改进
- 更新宝箱掉落表，common 级别新增牛肉/羊肉，rare 级别新增蘑菇煲
- 扩展物品系统：INVENTORY_TEMPLATE、ITEM_LABELS、ITEM_ICONS、INVENTORY_CATEGORIES

---

## v1.2.24 (2025-02-14)

### 🐛 Bug 修复
- **修复地面不显示问题** - 调整脚本加载顺序，确保实体类在游戏逻辑模块之前加载
  - 将 `15-entities-*.js` 移到 `11-game-init.js` 之前
  - 添加调试日志到 `generatePlatform()` 函数

### 🎨 UI/UX 改进
- **重构背包功能** - 改为弹出式按钮
  - 从第一行 HUD 移除背包显示
  - 在左侧添加背包按钮（金币下方）
  - 与其他功能按钮保持一致的交互方式
  - 删除不再使用的 `.hud-inventory-btn` CSS 样式

### 🛠️ 开发体验优化
- **添加开发环境配置**
  - 新增 `package.json` 配置 npm 脚本
  - 创建 `dev.bat` 简化开发启动
  - 添加完整的开发指南文档
  - 创建快速参考文档

- **整理项目结构**
  - 创建 `tests/debug-pages/` 目录
  - 移动所有测试 HTML 文件到测试目录
  - 添加测试页面说明文档
  - 主目录更清晰，只保留核心文件

### 📝 文档
- 新增 `开发指南.md` - 完整的开发流程说明
- 新增 `快速参考.md` - 常用命令快速查阅
- 新增 `tests/debug-pages/README.md` - 测试页面说明
- 新增 `ui-layout-test.html` - UI 布局测试页面

### 🔧 技术改进
- 优化开发流程，推荐使用浏览器直接测试
- 仅在需要时构建 APK，提高开发效率
- 添加多个调试页面辅助开发

---

## v1.2.23 (之前版本)

### 功能
- 基础游戏功能
- 单词学习系统
- 背包和装备系统
- 多生物群系
- 敌人和战斗系统

---

## 版本号说明

版本号格式：`主版本.次版本.修订号`

- **主版本**：重大功能更新或架构变更
- **次版本**：新功能添加或重要改进
- **修订号**：Bug 修复和小改进

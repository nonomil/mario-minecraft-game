# 游戏优化0220 - 测试与发布检查清单

## 1. 每版本基础检查（必须）

- `node --check`：本版本改动 JS 文件全部通过
- 村庄主流程手测：进村 -> 进屋 -> 退出 -> 离村
- BOSS 主流程手测：触发 -> 战斗 -> 结算 -> 恢复
- 背包/商店手测：资源增减正确

## 2. 专项回归项

- 文案：村庄相关 toast/fillText/NPC 气泡无乱码
- 室内：门自动离开，床/书按宝箱键触发
- BOSS：血条显示稳定，武器锁定仅战斗时生效
- 经济：卖出与购买不出现负数库存/钻石
- Buff：防晒霜/隐身状态按时失效

## 3. 自动化建议（可逐步接入）

- Playwright 增加场景：
  - 村庄室内提示可见性断言
  - BOSS 血条渲染断言
  - 末影珍珠后 10 秒敌人未追击断言

## 4. 发布前核对

- 版本号来源一致（`apk/version.json` 等）
- `CHANGELOG.md`、`Progress.md`、`VERSION-STATUS.md` 同步
- Release “What’s New” 文案对应本次真实改动

## 5. 回滚策略

- 每版本独立 commit，可按版本回滚
- 若线上出现严重问题，优先回滚当前版本，不跨版本摘改

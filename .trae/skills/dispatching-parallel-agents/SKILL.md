---
name: dispatching-parallel-agents
description: 当执行包含完全独立、无依赖任务的实施计划时使用 - 允许通过同时运行多个代理来显著缩短完成时间
---

# 并行代理分发

## 概述

当任务之间没有任何依赖关系且可以完全并行化时，并行代理分发是最高效的执行方式。

**核心原则：** 独立性驱动效率。

**开始时声明：** “我正在识别并分发并行代理以执行独立任务。”

## 何时并行化

**可以并行：**
- [ ] 互不重叠的文件更改。
- [ ] 独立的模块开发（例如：前端 UI 组件 vs 后端独立服务）。
- [ ] 编写不同组件的单元测试。

**不能并行：**
- [ ] 依赖于前一个任务输出的任务。
- [ ] 共享同一个文件的大量修改（会导致 git 冲突）。
- [ ] 需要顺序逻辑验证的步骤。

## 工作流程

### 1. 任务分析

查看实施计划，标记所有可以并行执行的任务组。

### 2. 环境隔离（必需）

为每个并行代理分配一个隔离的 worktree 或临时目录，以防止文件锁竞争和 git 冲突。

### 3. 分发代理

使用 `implementation` 类型的 Task 工具同时启动多个代理。

### 4. 进度同步

作为主代理，你负责跟踪所有子代理的状态。

### 5. 集成与审查

所有并行任务完成后，逐一进行 superpowers:requesting-code-review。

## 示例

```
计划：
任务 1: 编写 User 模块测试
任务 2: 编写 Product 模块测试
任务 3: 实施整合逻辑 (依赖 1 & 2)

执行：
1. 同时分发 代理 A 执行任务 1，代理 B 执行任务 2。
2. 任务 1 & 2 完成后，进行审查。
3. 最后执行任务 3。
```

## 危险信号

**切勿：**
- 并行执行有依赖关系的任务。
- 让多个代理在没有 worktree 隔离的情况下操作同一个 git 分支。
- 失去对并行任务状态的跟踪。
- 跳过任何一个并行任务的独立审查。
